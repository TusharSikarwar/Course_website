<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Details</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/slicknav.css">
    <link rel="stylesheet" href="assets/css/flaticon.css">
    <link rel="stylesheet" href="assets/css/progressbar_barfiller.css">
    <link rel="stylesheet" href="assets/css/gijgo.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/animated-headline.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
    
    <link href="https://fonts.googleapis.com/css2?family=Fondamento:ital@1&display=swap" rel="stylesheet">
</head>
<script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
<body>
    <section class="slider-area slider-area2">
        <div class="slider-active slick-initialized slick-slider">
            <!-- Single Slider -->
            <div class="slick-list draggable">
                <div class="slick-track" style="opacity: 1; width: 1519px;">
                    <div class="single-slider slider-height2 slick-slide slick-current slick-active"
                        data-slick-index="0" aria-hidden="false"
                        style="width: 1519px; position: relative; left: 0px; top: 0px; z-index: 999; opacity: 1;"
                        tabindex="0">
                        <div class="container">
                            <div class="row">
                                <div class="col-xl-8 col-lg-11 col-md-12">
                                    <div class="hero__caption hero__caption2">
                                        <h1 data-animation="bounceIn" data-delay="0.2s" class=""
                                            style="animation-delay: 0.2s; font-family: 'Righteous', cursive;">Our courses</h1>
                                        <!-- breadcrumb Start-->
                                        <nav aria-label="breadcrumb">
                                            <ol class="breadcrumb">
                                                <li class="breadcrumb-item"><a href="/" tabindex="0" style="font-family: 'Righteous', cursive;">Home</a>
                                                </li>
                                                <li class="breadcrumb-item"><a href="/courses" tabindex="0" style="font-family: 'Righteous', cursive;">Services</a></li>
                                            </ol>
                                        </nav>
                                        <!-- breadcrumb End -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <main>
        <div class="container my-4" style="height: 15cm">
            <div class="row justify-content-center">


                <!-- Example split danger button -->
                <div class="btn-group col-8 justify-content-center">
                    <button type="button" class="btn btn-success" style="font-size: medium; font-family: 'Fondamento', cursive;" id="subActive" >------------</button>
                    <button type="button" id="dropDown" class="btn btn-success dropdown-toggle dropdown-toggle-split col-3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="font-size: medium;">
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <div class="dropdown-menu" id="dropdown-menu">
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item"  onClick="loadSubject()" style="font-family: 'Righteous', cursive;">Load more</a>
                    </div>
                </div>


                <div class="container-xl my-5 w-75">
                    <div class="table-responsive">
                        <div class="table-wrapper" style="height: 10cm; overflow-y: auto;">
                            <div class="table-title">
                                <div class="row">
                                    <div class="col-sm-8 d-flex">
                                        <i>
                                            <h2 style="font-family: 'Righteous', cursive;">Subject <b >Details</b></h2>
                                        </i>
                                    </div>
                                </div>
                            </div>
                            <table class="table table-striped table-hover table-bordered">
                                <thead>
                                    <tr>
                                        <th style="font-family: 'Righteous', cursive;">File Name</th>
                                        <th style="font-family: 'Righteous', cursive;">Uploaded by :-</th>
                                        <th style="font-family: 'Righteous', cursive;">Uploaded on :-</th>
                                        <th style="font-family: 'Righteous', cursive;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="addFile">

                                </tbody>
                            </table>
                            <div class="clearfix">
                            </div>
                        </div>
                        <button type="button" class="btn m-2 p-3 border-0 btn-primary btn-sm justify-content-center"
                            onclick="loadTableData(null)" style="font-family: 'Righteous', cursive;">Load more data ....</button>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <script>
        let allFiles;
        let subjectId = 1;
        function loadSubject() {
            subInfo = axios.post('/subLoad', {
                subjectId: subjectId,
            }).then(response => {
                // console.log(response.data)
                if (response.data.newSubjects != null) {
                    document.getElementById('dropdown-menu').insertAdjacentHTML('afterbegin', `<a class="dropdown-item" onClick="loadSubjectData('${response.data.newSubjects}')" style="font-family: 'Fondamento', cursive;" >${response.data.newSubjects}</a>`);
                    subjectId = response.data.newSubjectId;
                } else {
                    alert('No more subjects !');

                }
            }, error => {

                alert('Some error came up while loading. Try again')
            })
        }

        loadSubject()
        setTimeout(loadSubject,1000);

        function getUrlVars(url) {
            var hash;
            var myJson = {};
            var hashes = url.slice(url.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                myJson[hash[0]] = hash[1];
            }
            return myJson;
        }

        let params = getUrlVars(document.URL);

        if (params.passincorrect == 1) {
            al = params.alert.replaceAll("%20", " ");
            alert(al);
        }
        
        

        fileDataCount =1;
    function loadSubjectData(subject){
        fileDataCount =1;
        node = document.getElementById("addFile")
        while(node.firstChild){
            node.removeChild(node.firstChild);
        }

        if(subject != null){
            document.getElementById("subActive").innerText = subject;
            loadTableData(subject)        
        }else{
            subject = document.getElementById("subActive").innerText ;
            if(subject == "------------"){
                alert('Select the subject first !');
            }
            else{
                loadTableData(subject)        
            }
        }
    }

    function loadTableData(subject){
        if(subject == null){
            subject = document.getElementById('subActive').innerText; 
            // console.log(subject);
        }
        axios.post('/fetchData', {
            'subject' : subject, 'fileDataCount':fileDataCount, 
        }).then((response) =>{
            console.log(response.data)
            if(response.data == 'No more files !'){
                alert('No more files !')
            }else{
                // console.log(response.data.fileName)
                // console.log(response.data.fileName.split(".").slice(-1)[0])
                viewing =null
                if(response.data.fileName.split(".").slice(-1)[0] == 'pdf'){
                    viewing = 'visibility';
                }else{ viewing = 'visibility_off' }

                fileDataCount = response.data.nextRow;
                document.getElementById('addFile').insertAdjacentHTML('afterbegin',`<tr id='${response.data.fileId}'>
                                            <td style="font-family: 'Fondamento', cursive;">${response.data.fileName}</td>
                                            <td style="font-family: 'Fondamento', cursive;">${response.data.submitedBy}</td>
                                            <td style="font-family: 'Righteous', cursive;">${response.data.time}</td>
                                            <td>
                                                <a href='/fileDownload?fileName=${response.data.fileName}&fileId=${response.data.fileId}' class="download" title="download" data-toggle="tooltip"><i class="material-icons"><span class="material-symbols-outlined">download</span></i></a>
                                            </td>
                                        </tr>`)
            }
                       
        },(error) => {
            
            alert('Some error came up while loading data in table. Try again')
        })
    }

    </script>



    <!-- <div class="container-fluid">
        <div class="embed-responsive embed-responsive-21by9">
            <iframe class="embed-responsive-item" src=""></iframe>
          </div>
    </div> -->






    <footer>
        <div class="footer-wrappper footer-bg">
           <!-- Footer Start-->
           <div class="footer-area footer-padding">
               <div class="container">
                   <div class="row justify-content-between">
                       <div class="col-xl-4 col-lg-5 col-md-4 col-sm-6">
                           <div class="single-footer-caption mb-50">
                               <div class="single-footer-caption mb-30">
                                   <!-- logo -->
                                   <div class="footer-logo mb-25">
                                       <a href="/"><img src="assets/img/gallery/logo.svg" alt="" height="75cm" width="100cm"> </a>
                                   </div>
                                   <div class="footer-tittle">
                                       <div class="footer-pera">
                                           <p style="font-family: 'Fondamento', cursive;">An expert is a man who knows just that much more about his subject than his associates. Most of us are nearer the top than we think. We fail to realize how easy it is, how necessary it is to learn that fraction more.</p>
                                       </div>
                                   </div>
                                   <!-- social -->
                               </div>
                           </div>
                       </div>
                       <div class="col-xl-2 col-lg-3 col-md-4 col-sm-5">
                           <div class="single-footer-caption mb-50">
                               <div class="footer-tittle">
                                   <form >
                                       <h4 style="font-family: 'Righteous', cursive;">Message to admin</h4>
                                       <div class="form-row text-white">
                                         <div class="form-group col-md-6">
                                           <input type="text" id="myEmail" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" placeholder="Your Email">
                                         </div>
                                       </div>
                                       <div class="form-row text-white">
                                         <div class="form-group col-md-6">
                                           <input type="text" id="myName" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" placeholder="Your Name">
                                         </div>
                                       </div>
                                       <div class="input-group">
                                         <textarea class="form-control" id="myMessage" aria-label="With textarea" placeholder="Enter your Message"></textarea>
                                       </div>
                                       <button type="button" onclick="sendMessage()" class=" my-2 p-3 border-0 btn-outline-light rounded-circle btn-sm justify-content-center" style="cursor: pointer; font-family: 'Fondamento', cursive;" >Send</button>
                                   </form>
                               </div>
                           </div>
                       </div>
                       <script>
                           function sendMessage(){
   
                                   axios.post('/adminMes',{
                                   email: document.getElementById('myEmail').value,
                                   name: document.getElementById('myName').value,
                                   message: document.getElementById('myMessage').value,
                               }).then((response) => {
                                   // console.log(response)
                                   alert('We got your message ');                                                        
                               }).catch((err) => {
                                   alert('Some error came up while sending to admin !')
                                   console.log(err)
                               });
                           }
                           if(params.courseName != undefined){
                            document.getElementById('subActive').innerText= params.courseName.replaceAll('%20'," ");
                           }
                       </script>
                       <div class="col-xl-2 col-lg-3 col-md-4 col-sm-5">
                           <div class="single-footer-caption mb-50">
                               <div class="footer-tittle">
                                   <h4 style="font-family: 'Righteous', cursive;">Assignments</h4>
                                   <ul>
                                       <li><a href="/courses?courseName=Data Structure and Algorithm & Computative Coding" style="font-family: 'Fondamento', cursive;">DSA & CC</a></li>
                                       <li><a href="/courses?courseName=Theory of Computation" style="font-family: 'Fondamento', cursive;">TOC</a></li>
                                       <li><a href="/courses" style="font-family: 'Fondamento', cursive;">and many more -></a></li>
                                   </ul>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
           <!-- footer-bottom area -->
           <div class="footer-bottom-area">
               <div class="container">
                   <div class="footer-border">
                       <div class="row d-flex align-items-center">
                           <div class="col-xl-12 ">
                               <div class="footer-copy-right text-center">
                                   <p style="font-family: 'Fondamento', cursive;"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                     Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved 
                                     <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
             <!-- Footer End-->
         </div>
     </footer>

</body>

<!-- JS here -->
<script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
<!-- Jquery, Popper, Bootstrap -->
<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
<script src="./assets/js/popper.min.js"></script>
<script src="./assets/js/bootstrap.min.js"></script>
<!-- Jquery Mobile Menu -->
<script src="./assets/js/jquery.slicknav.min.js"></script>

<!-- Jquery Slick , Owl-Carousel Plugins -->
<script src="./assets/js/owl.carousel.min.js"></script>
<script src="./assets/js/slick.min.js"></script>
<!-- One Page, Animated-HeadLin -->
<script src="./assets/js/wow.min.js"></script>
<script src="./assets/js/animated.headline.js"></script>
<script src="./assets/js/jquery.magnific-popup.js"></script>

<!-- Date Picker -->
<script src="./assets/js/gijgo.min.js"></script>
<!-- Nice-select, sticky -->
<script src="./assets/js/jquery.nice-select.min.js"></script>
<script src="./assets/js/jquery.sticky.js"></script>
<!-- Progress -->
<script src="./assets/js/jquery.barfiller.js"></script>

<!-- counter , waypoint,Hover Direction -->
<script src="./assets/js/jquery.counterup.min.js"></script>
<script src="./assets/js/waypoints.min.js"></script>
<script src="./assets/js/jquery.countdown.min.js"></script>
<script src="./assets/js/hover-direction-snake.min.js"></script>

<!-- contact js -->
<script src="./assets/js/contact.js"></script>
<script src="./assets/js/jquery.form.js"></script>
<script src="./assets/js/jquery.validate.min.js"></script>
<script src="./assets/js/mail-script.js"></script>
<script src="./assets/js/jquery.ajaxchimp.min.js"></script>

<!-- Jquery Plugins, main Jquery -->
<script src="./assets/js/plugins.js"></script>
<script src="./assets/js/main.js"></script>

</html>